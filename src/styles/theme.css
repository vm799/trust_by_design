/**
 * JobProof Theme Variables
 * WCAG AAA compliant color system with dark/light mode support
 * Professional industry aesthetic with high contrast
 */

/* CRITICAL: Tailwind CSS directives - these inject all Tailwind utilities */
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Base CSS Variables - Dark mode is now the only standard mode */
  /* Light mode removed due to poor contrast for field work */
  --background: 0 0% 98%;
  --foreground: 222.2 84% 4.9%;

  /* Primary - Deep Blue (Trust & Professionalism) */
  --primary: 221 83% 53%;
  --primary-foreground: 0 0% 100%;

  /* Secondary - Charcoal */
  --secondary: 217.2 32.6% 17.5%;
  --secondary-foreground: 0 0% 100%;

  /* Accent - Safety Orange */
  --accent: 14 91% 60%;
  --accent-foreground: 0 0% 100%;

  /* Success - Emerald Green */
  --success: 142 76% 36%;
  --success-foreground: 0 0% 100%;

  /* Warning - Safety Yellow */
  --warning: 38 92% 50%;
  --warning-foreground: 222.2 47.4% 11.2%;

  /* Danger - Alert Red */
  --danger: 0 84.2% 60.2%;
  --danger-foreground: 0 0% 100%;

  /* Muted - Light Gray */
  --muted: 210 40% 96.1%;
  --muted-foreground: 215.4 16.3% 36.9%;

  /* Card/Elevated Surfaces */
  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;

  /* Borders */
  --border: 214.3 31.8% 81.4%;
  --input: 214.3 31.8% 81.4%;
  --ring: 221 83% 53%;

  /* Border Radius */
  --radius: 0.5rem;

  /* Tooltip highlight color - UAT Fix #1 */
  --tooltip-bg: 38 92% 50%;
  --tooltip-foreground: 222.2 47.4% 11.2%;
}

.dark {
  /* Dark Mode Colors - Deep Blue/Charcoal with High Contrast */
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;

  /* Primary - Brighter Blue for dark backgrounds */
  --primary: 217.2 91.2% 59.8%;
  --primary-foreground: 222.2 47.4% 11.2%;

  /* Secondary - Slate Blue */
  --secondary: 217.2 32.6% 17.5%;
  --secondary-foreground: 210 40% 98%;

  /* Accent - Safety Orange (More vibrant in dark mode) */
  --accent: 14 91% 65%;
  --accent-foreground: 222.2 47.4% 11.2%;

  /* Success - Emerald */
  --success: 142 71% 45%;
  --success-foreground: 144.9 80.4% 10%;

  /* Warning - Safety Yellow */
  --warning: 38 92% 55%;
  --warning-foreground: 222.2 47.4% 11.2%;

  /* Danger - Alert Red */
  --danger: 0 72.2% 50.6%;
  --danger-foreground: 210 40% 98%;

  /* Muted - Dark Slate */
  --muted: 217.2 32.6% 17.5%;
  --muted-foreground: 215 20.2% 65.1%;

  /* Card/Elevated Surfaces */
  --card: 222.2 47% 11.2%;
  --card-foreground: 210 40% 98%;

  /* Borders */
  --border: 215 25% 27%;
  --input: 217.2 32.6% 17.5%;
  --ring: 212.7 26.8% 83.9%;
}

/* ============================================
   DAYLIGHT MODE - High-Visibility Construction Theme
   Optimized for outdoor use in 100% sunlight
   PhD-Level Spec: Luminance Contrast over Color
   ============================================ */
.daylight,
[data-theme="daylight"] {
  /* Background - Anti-glare Gray (#F8FAFC) - reduces eye strain in sunlight */
  --background: 210 40% 98%;
  --foreground: 222 47% 17%;

  /* Primary - Safety Orange (#FF8C00) - maximum visibility CTAs */
  --primary: 33 100% 50%;
  --primary-foreground: 222 47% 11%;

  /* Secondary - High-contrast Slate for supporting UI */
  --secondary: 215 25% 27%;
  --secondary-foreground: 0 0% 100%;

  /* Accent - Vibrant Safety Orange for critical actions */
  --accent: 33 100% 50%;
  --accent-foreground: 222 47% 11%;

  /* Success - High-saturation Emerald for outdoor visibility */
  --success: 142 76% 36%;
  --success-foreground: 0 0% 100%;

  /* Warning - Pure Safety Yellow - maximum visibility */
  --warning: 45 100% 51%;
  --warning-foreground: 222 47% 11%;

  /* Danger - High-contrast Red */
  --danger: 0 84% 60%;
  --danger-foreground: 0 0% 100%;

  /* Muted - Subtle gray that maintains contrast */
  --muted: 210 40% 93%;
  --muted-foreground: 215 25% 40%;

  /* Card - Pure white with subtle distinction */
  --card: 0 0% 100%;
  --card-foreground: 222 47% 17%;

  /* Borders - Thick, visible borders for sunlight */
  --border: 215 25% 75%;
  --input: 215 25% 85%;
  --ring: 33 100% 50%;

  /* Daylight-specific tokens */
  --daylight-shadow: 4px 4px 0px hsl(222 47% 11%);
  --daylight-border-width: 2px;
  --daylight-touch-target: 56px;
}

/* High Contrast Mode for Enhanced Accessibility */
@media (prefers-contrast: high) {
  :root {
    --foreground: 0 0% 0%;
    --background: 0 0% 100%;
    --border: 0 0% 0%;
  }

  .dark {
    --foreground: 0 0% 100%;
    --background: 0 0% 0%;
    --border: 0 0% 100%;
  }
}

/* Focus Indicators - WCAG 2.1 Compliant */
:focus-visible {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}

.focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary;
}

/* Utility Classes for Theme-Aware Text */
.text-foreground {
  color: hsl(var(--foreground));
}

.text-muted {
  color: hsl(var(--muted-foreground));
}

.bg-background {
  background-color: hsl(var(--background));
}

.bg-card {
  background-color: hsl(var(--card));
}

.border-default {
  border-color: hsl(var(--border));
}

/* Button Variants with Proper Contrast Ratios */
.btn-primary {
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
}

.btn-primary:hover {
  background-color: hsl(var(--primary) / 0.9);
}

.btn-secondary {
  background-color: hsl(var(--secondary));
  color: hsl(var(--secondary-foreground));
}

.btn-secondary:hover {
  background-color: hsl(var(--secondary) / 0.8);
}

.btn-danger {
  background-color: hsl(var(--danger));
  color: hsl(var(--danger-foreground));
}

.btn-danger:hover {
  background-color: hsl(var(--danger) / 0.9);
}

/* Safety Color Scheme for Field Service Industry */
.safety-orange {
  color: hsl(var(--accent));
}

.bg-safety-orange {
  background-color: hsl(var(--accent));
  color: hsl(var(--accent-foreground));
}

/* Professional Deep Blue for Trust */
.professional-blue {
  color: hsl(var(--primary));
}

.bg-professional-blue {
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
}

/* Status Colors with Proper Contrast */
.status-success {
  background-color: hsl(var(--success) / 0.1);
  color: hsl(var(--success));
  border: 1px solid hsl(var(--success) / 0.3);
}

.status-warning {
  background-color: hsl(var(--warning) / 0.1);
  color: hsl(var(--warning));
  border: 1px solid hsl(var(--warning) / 0.3);
}

.status-danger {
  background-color: hsl(var(--danger) / 0.1);
  color: hsl(var(--danger));
  border: 1px solid hsl(var(--danger) / 0.3);
}

/* ============================================
   TOUCH TARGET ACCESSIBILITY (WCAG 2.5.5)
   Minimum 44x44px touch targets for mobile
   ============================================ */

/* Mobile-first touch targets for buttons and interactive elements */
@media (pointer: coarse) {
  button,
  [role="button"],
  a,
  input[type="checkbox"],
  input[type="radio"],
  select {
    min-height: 44px;
    min-width: 44px;
  }

  /* Larger touch targets for critical actions */
  .touch-target-lg {
    min-height: 48px;
    min-width: 48px;
  }

  /* Extra large for primary CTAs in field conditions */
  .touch-target-xl {
    min-height: 56px;
    min-width: 56px;
  }
}

/* Ensure adequate spacing between touch targets */
.touch-safe {
  margin: 8px;
}

/* Field worker optimized button - gloved hands friendly */
.btn-field {
  min-height: 56px;
  min-width: 56px;
  padding: 16px 24px;
  font-size: 14px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* High contrast mode for outdoor visibility */
@media (prefers-contrast: more) {
  .btn-field {
    border-width: 3px;
  }
}

/* ============================================
   MICRO-INTERACTIONS & ANIMATIONS
   CSS-only animations for delightful UX
   ============================================ */

/* Keyframe Definitions */
@keyframes success-pop {
  0% { transform: scale(0.8); opacity: 0; }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes confetti-fall {
  0% { transform: translateY(-100%) rotate(0deg); opacity: 1; }
  100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes bounce-subtle {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

@keyframes pulse-ring {
  0% { transform: scale(0.95); opacity: 0.5; }
  50% { transform: scale(1.05); opacity: 0.8; }
  100% { transform: scale(0.95); opacity: 0.5; }
}

/* Animation Utility Classes */
.animate-success-pop {
  animation: success-pop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.animate-bounce-subtle {
  animation: bounce-subtle 2s ease-in-out infinite;
}

.animate-pulse-ring {
  animation: pulse-ring 2s ease-in-out infinite;
}

.animate-shimmer {
  background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* Hover Lift Effect - Cards & Containers */
.hover-lift {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.hover-lift:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px -8px rgba(0, 0, 0, 0.3);
}

/* Button Press Spring Effect - UAT Fix #6 */
.press-spring {
  transition: transform 0.15s cubic-bezier(0.34, 1.56, 0.64, 1),
              box-shadow 0.15s ease,
              background-color 0.15s ease;
}
.press-spring:active {
  transform: scale(0.95);
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
}
.press-spring:hover {
  box-shadow: 0 4px 12px -2px rgba(0, 0, 0, 0.15);
}

/* Button Affordance States - UAT Fix #6 */
.btn-interactive {
  position: relative;
  overflow: hidden;
  transition: all 0.2s ease;
}
.btn-interactive::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, rgba(255,255,255,0.1) 0%, transparent 100%);
  opacity: 0;
  transition: opacity 0.2s ease;
}
.btn-interactive:hover::after {
  opacity: 1;
}
.btn-interactive:active {
  transform: translateY(1px);
}
.btn-interactive:focus-visible {
  outline: 2px solid hsl(var(--primary));
  outline-offset: 2px;
}

/* Priority Button Styles - UAT Fix #5 */
.btn-priority-normal {
  background-color: hsl(217.2 32.6% 17.5%);
  color: hsl(210 40% 98%);
  border: 2px solid hsl(217.2 32.6% 25%);
}
.btn-priority-normal:hover {
  background-color: hsl(217.2 32.6% 22%);
}
.btn-priority-normal.selected {
  background-color: hsl(221 83% 53%);
  border-color: hsl(221 83% 60%);
  box-shadow: 0 0 0 3px hsla(221, 83%, 53%, 0.2);
}

.btn-priority-urgent {
  background-color: hsl(0 84.2% 60.2% / 0.1);
  color: hsl(0 84.2% 60.2%);
  border: 2px solid hsl(0 84.2% 60.2% / 0.3);
}
.btn-priority-urgent:hover {
  background-color: hsl(0 84.2% 60.2% / 0.15);
}
.btn-priority-urgent.selected {
  background-color: hsl(0 84.2% 60.2%);
  color: white;
  border-color: hsl(0 84.2% 55%);
  box-shadow: 0 0 0 3px hsla(0, 84.2%, 60.2%, 0.3);
}

/* Tooltip Highlight Styles - UAT Fix #1 */
.tooltip-highlight {
  background-color: hsl(38 92% 50%);
  color: hsl(222.2 47.4% 11.2%);
  border: 1px solid hsl(38 92% 55%);
  box-shadow: 0 4px 12px -2px hsla(38, 92%, 50%, 0.4);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-size: 10px;
  padding: 6px 12px;
  border-radius: 8px;
}

/* Light Mode - Professional clean theme for office/indoor use */
.light,
[data-theme="light"] {
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;

  --primary: 221 83% 53%;
  --primary-foreground: 0 0% 100%;

  --secondary: 210 40% 96.1%;
  --secondary-foreground: 222.2 47.4% 11.2%;

  --accent: 14 91% 55%;
  --accent-foreground: 0 0% 100%;

  --success: 142 76% 36%;
  --success-foreground: 0 0% 100%;

  --warning: 38 92% 50%;
  --warning-foreground: 222.2 47.4% 11.2%;

  --danger: 0 84.2% 60.2%;
  --danger-foreground: 0 0% 100%;

  --muted: 210 40% 96.1%;
  --muted-foreground: 215.4 16.3% 46.9%;

  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;

  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --ring: 221 83% 53%;
}

/* ============================================
   DAYLIGHT MODE UTILITY CLASSES
   Neobrutalist design for outdoor visibility
   ============================================ */

/* Daylight mode text overrides */
.daylight .text-white {
  color: hsl(222 47% 17%);
}

.daylight .bg-slate-900 {
  background-color: hsl(0 0% 100%);
  border: 2px solid hsl(215 25% 75%);
}

.daylight .bg-slate-950 {
  background-color: hsl(210 40% 98%);
}

.daylight .text-slate-300,
.daylight .text-slate-400 {
  color: hsl(215 25% 40%);
}

.daylight .border-white\/5,
.daylight .border-white\/10 {
  border-color: hsl(215 25% 75%);
}

/* Neobrutalist Button - Hard shadow for sun visibility */
.btn-neobrutalist {
  position: relative;
  border: 2px solid currentColor;
  box-shadow: 4px 4px 0px hsl(222 47% 11%);
  transition: transform 0.1s ease, box-shadow 0.1s ease;
  font-weight: 600;
  letter-spacing: -0.01em;
  line-height: 1.5;
}

.btn-neobrutalist:hover {
  transform: translate(-2px, -2px);
  box-shadow: 6px 6px 0px hsl(222 47% 11%);
}

.btn-neobrutalist:active {
  transform: translate(2px, 2px);
  box-shadow: 2px 2px 0px hsl(222 47% 11%);
}

/* Daylight Primary Button - Safety Orange */
.daylight .btn-primary,
.btn-daylight-primary {
  background-color: hsl(33 100% 50%);
  color: hsl(222 47% 11%);
  border: 2px solid hsl(222 47% 11%);
  box-shadow: 4px 4px 0px hsl(222 47% 11%);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.daylight .btn-primary:hover,
.btn-daylight-primary:hover {
  background-color: hsl(33 100% 55%);
  transform: translate(-2px, -2px);
  box-shadow: 6px 6px 0px hsl(222 47% 11%);
}

/* Daylight Secondary Button */
.daylight .btn-secondary,
.btn-daylight-secondary {
  background-color: hsl(0 0% 100%);
  color: hsl(222 47% 17%);
  border: 2px solid hsl(222 47% 17%);
  box-shadow: 4px 4px 0px hsl(222 47% 17%);
}

/* Daylight Danger Button */
.daylight .btn-danger,
.btn-daylight-danger {
  background-color: hsl(0 84% 60%);
  color: hsl(0 0% 100%);
  border: 2px solid hsl(222 47% 11%);
  box-shadow: 4px 4px 0px hsl(222 47% 11%);
}

/* Daylight Field Button - 56px touch target for gloved hands */
.btn-daylight-field {
  min-height: 56px;
  min-width: 56px;
  padding: 16px 24px;
  font-size: 16px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border: 2px solid hsl(222 47% 11%);
  box-shadow: 4px 4px 0px hsl(222 47% 11%);
  background-color: hsl(33 100% 50%);
  color: hsl(222 47% 11%);
}

.btn-daylight-field:active {
  transform: translate(2px, 2px);
  box-shadow: 2px 2px 0px hsl(222 47% 11%);
}

/* Daylight Card - High contrast borders */
.card-daylight {
  background-color: hsl(0 0% 100%);
  border: 2px solid hsl(215 25% 75%);
  box-shadow: 4px 4px 0px hsl(215 25% 85%);
}

/* Daylight Input Fields - Thick borders for visibility */
.daylight input,
.daylight textarea,
.daylight select {
  border-width: 2px;
  border-color: hsl(215 25% 65%);
  background-color: hsl(0 0% 100%);
}

.daylight input:focus,
.daylight textarea:focus,
.daylight select:focus {
  border-color: hsl(33 100% 50%);
  box-shadow: 0 0 0 3px hsla(33, 100%, 50%, 0.3);
}

/* Thick-stroke icon support for daylight mode */
.daylight .material-symbols-outlined {
  font-variation-settings: 'wght' 500;
}

/* Icon container for daylight visibility */
.icon-daylight {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 44px;
  min-height: 44px;
  border: 2px solid currentColor;
  border-radius: 8px;
}

/* ============================================
   PHASE 11: UI OVERFLOW FIXES
   Prevent layout overflow and text clipping
   ============================================ */

/* Global box-sizing reset */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/* Form container with overflow protection */
.form-container {
  @apply max-w-md p-6 rounded-xl shadow-xl overflow-hidden;
}

/* Headings with truncation for overflow protection */
h1, h2, h3, h4, h5, h6 {
  @apply leading-tight;
  overflow-wrap: break-word;
  word-wrap: break-word;
}

.heading-truncate {
  @apply truncate;
  text-overflow: ellipsis;
}

/* Cancel button with danger styling */
.cancel-btn {
  @apply bg-red-500/20 hover:bg-red-500/30 border border-red-400
         text-red-100 px-6 py-2 rounded-lg font-medium transition-all;
}

/* Form field overflow protection */
.form-field {
  @apply w-full overflow-hidden;
}

.form-field input,
.form-field textarea,
.form-field select {
  @apply w-full max-w-full;
}

/* Card overflow protection */
.card-overflow-safe {
  @apply overflow-hidden;
}

/* Responsive text that prevents overflow */
.text-responsive {
  @apply break-words;
  overflow-wrap: break-word;
  word-break: break-word;
  hyphens: auto;
}

/* ============================================
   PRINT STYLESHEET - Construction Report PDFs
   Light background, readable fonts for paper
   ============================================ */

@media print {
  /* Reset to light background for paper printing */
  body,
  html {
    background: white !important;
    color: black !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Force light theme for report pages */
  .print-light,
  .report-container,
  [data-print="light"] {
    background: white !important;
    color: #1a1a1a !important;
  }

  /* Ensure dark backgrounds become light */
  .bg-slate-950,
  .bg-slate-900,
  .bg-slate-800 {
    background: white !important;
  }

  /* Ensure light text becomes dark */
  .text-white,
  .text-slate-100,
  .text-slate-200,
  .text-slate-300 {
    color: #1a1a1a !important;
  }

  /* Muted text becomes gray for readability */
  .text-slate-400,
  .text-slate-500 {
    color: #555555 !important;
  }

  /* Hide non-essential UI elements */
  .no-print,
  .print-hidden,
  nav,
  footer,
  button,
  .btn,
  [role="button"],
  .offline-indicator,
  .sync-badge {
    display: none !important;
  }

  /* Keep essential buttons visible if needed */
  .print-keep {
    display: block !important;
  }

  /* Photo grid - ensure images print correctly */
  .photo-grid img,
  .evidence-photo {
    max-width: 100% !important;
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Signature canvas - ensure visibility */
  .signature-canvas,
  .signature-preview {
    border: 1px solid #333 !important;
    background: white !important;
  }

  /* Status badges - high contrast for print */
  .status-badge,
  .seal-badge {
    border: 1px solid #333 !important;
    background: #f0f0f0 !important;
    color: #1a1a1a !important;
  }

  /* Headers and sections */
  h1, h2, h3, h4, h5, h6 {
    color: #1a1a1a !important;
    page-break-after: avoid;
  }

  /* Page break controls */
  .page-break-before {
    page-break-before: always;
  }

  .page-break-after {
    page-break-after: always;
  }

  .avoid-page-break {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Ensure borders are visible */
  .border,
  [class*="border-"] {
    border-color: #cccccc !important;
  }

  /* Card backgrounds for print */
  .card,
  .bg-card,
  [class*="rounded-"] {
    background: white !important;
    box-shadow: none !important;
    border: 1px solid #e0e0e0 !important;
  }

  /* Timeline and metadata sections */
  .timeline-item,
  .metadata-row {
    border-left: 2px solid #333 !important;
  }

  /* GPS/W3W/Timestamp metadata */
  .photo-metadata {
    font-size: 10px !important;
    color: #333 !important;
    background: #f5f5f5 !important;
    padding: 4px 8px !important;
    border-radius: 4px !important;
  }

  /* Certificate/seal section */
  .seal-certificate {
    border: 2px solid #333 !important;
    background: #fafafa !important;
  }

  /* Reduce margins for paper */
  @page {
    margin: 0.5in;
    size: A4;
  }

  /* Ensure links show URL */
  a[href]::after {
    content: " (" attr(href) ")";
    font-size: 10px;
    color: #666;
  }

  /* Hide decorative link suffixes */
  a[href^="#"]::after,
  a[href^="javascript:"]::after,
  a.no-print-href::after {
    content: "";
  }
}
